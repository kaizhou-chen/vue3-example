import{q as r}from"./qs.DGMyDzwg.2024-08-23_0855.js";import{a as c}from"./axios.DsPaXkF5.2024-08-23_0855.js";import{h as a}from"./http.Dpy_JggD.2024-08-23_0855.js";import{a as s}from"./element-plus.DJt1SzqQ.2024-08-23_0855.js";async function k(t){let o=null;try{o=await t;let e=u(o);if(e===null)return o;throw l("操作失败",e),new Error(e)}catch(e){throw l("请求失败",e.message),e}}function l(t,o){s.info({message:t+"<br>"+o,dangerouslyUseHTMLString:!0})}function u(t){if(!t)return"响应为空";if(t.status==200){if((t==null?void 0:t.data)===""||(t==null?void 0:t.data)==null)return t.message||"响应数据为空"}else{const o=t.data instanceof String?"<br>"+t.data:"";return"status: "+t.status+"<br>"+t.statusText+o}return null}function d(t,o){const e=URL.createObjectURL(t),n=document.createElement("a");n.href=e,n.setAttribute("download",o),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(e)}const f={api:"http://localhost:8090/api"},{api:i}=f,m=c.CancelToken;function p(t){return a.post(`${i}/marketing/files`,JSON.stringify(t))}function y(t){return a.post(`${i}/marketing/removeFile`,r.stringify(t),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}function C(t,o,e){return a.post(`${i}/marketing/big-file/upload`,t,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:n=>{n.lengthComputable&&o(n.loaded)},cancelToken:new m(n=>{})})}function T(t,o){return a.get(`${i}/marketing/big-file/download/${t}`,{responseType:"blob",onDownloadProgress:e=>{e.lengthComputable&&o&&o(e.loaded,e.total)}}).then(e=>{o&&setTimeout(()=>{o(100,100)},500),d(e.data,t)})}export{k as a,T as d,p as l,y as r,f as s,C as u};
