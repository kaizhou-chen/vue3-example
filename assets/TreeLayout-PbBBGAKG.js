import{d as j,a7 as A,r as _,j as g,a as d,o as v,I as y,e as u,w as i,X as b,u as f,l as x,a8 as D,J as C,Y as k,L as F,M as J,b as P}from"./index-D6tOstyB.js";import{_ as X}from"./plugin-vueexport-helper-DlAUqK2U.js";const Y={style:{display:"flex","min-height":"100%","max-width":"100%"}},q={style:{"max-height":"calc(100vh - 175px)"}},z={key:1},G={style:{flex:"1","margin-left":"20px","max-width":"calc(100% - 300px)"}},H=j({__name:"TreeLayout",props:{menu:{default:[]},placeholder:{default:"搜索"},showTooltip:{type:Boolean},filterMethod:{},selectNode:{}},emits:["tabChange"],setup(w,{expose:V,emit:N}){const c=w,L=N,B=!!A().node,p=_(),r=_([]),h=_(""),s=_(""),M={children:"children",label:"label"};g(h,e=>{p.value.filter(e)}),g(s,e=>{var a;(a=p.value)==null||a.setCurrentKey(e);const l=R(c.menu,e,"value");L("tabChange",l)});function R(e,l,a){for(const t of e){let n=T(t,l,a);if(n)return n}return null}function T(e,l,a){if(e[a]==l)return e;if(e.children!=null){let t=null;for(let n=0;t==null&&n<e.children.length;n++)t=T(e.children[n],l,a);return t}return null}function S(e,l){return e?c.filterMethod?c.filterMethod(e,l):l.label.includes(e):!0}function E(e,l){if(!l.isLeaf||c.selectNode&&!c.selectNode(e,l))return;r.value.find(t=>t.name===e.value)||r.value.push({name:e.value,title:e.label}),s.value!==e.value&&(s.value=e.value)}function I(e){const l=r.value;let a=s.value;a===e&&l.forEach((t,n)=>{if(t.name===e){const m=l[n+1]||l[n-1];m&&(a=m.name)}}),s.value=a,r.value=l.filter(t=>t.name!==e)}function K(e){var l;(l=p.value)==null||l.setCurrentKey(e)}return V({setActiveNode:K}),(e,l)=>{const a=d("el-input"),t=d("el-card"),n=d("el-tooltip"),m=d("el-tab-pane"),U=d("el-tabs");return v(),y("div",Y,[u(t,{class:"tree-card"},{default:i(()=>[u(a,{class:"tree-filter",modelValue:f(h),"onUpdate:modelValue":l[0]||(l[0]=o=>x(h)?h.value=o:null),placeholder:e.placeholder},null,8,["modelValue","placeholder"]),b("div",q,[u(f(D),{class:"filter-tree",style:{"max-width":"600px"},ref_key:"treeRef",ref:p,"node-key":"value","default-expand-all":"",data:e.menu,props:M,"highlight-current":!0,"filter-node-method":S,onCurrentChange:E},{default:i(({node:o,data:$})=>[b("div",null,[B?C(e.$slots,"node",{key:0,data:$},void 0,!0):(v(),y("span",z,k(o.label),1))])]),_:3},8,["data"])])]),_:3}),b("div",G,[u(U,{type:"card",class:"demo-tabs",modelValue:f(s),"onUpdate:modelValue":l[1]||(l[1]=o=>x(s)?s.value=o:null),closable:f(r).length>1,onTabRemove:I},{default:i(()=>[(v(!0),y(F,null,J(f(r),o=>(v(),P(m,{key:o.name,label:o.title,name:o.name},{label:i(()=>[u(n,{content:o.name,disabled:!e.showTooltip,placement:"bottom"},{default:i(()=>[b("div",null,k(o.title),1)]),_:2},1032,["content","disabled"])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue","closable"]),u(t,{style:{"min-height":"calc(100% - 42px)"}},{default:i(()=>[C(e.$slots,"default",{},void 0,!0)]),_:3})])])}}}),Z=X(H,[["__scopeId","data-v-d526bdc1"]]);export{Z as T};
