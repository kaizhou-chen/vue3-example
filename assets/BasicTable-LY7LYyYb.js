import{b as M}from"./bus-CdlF-dbX.js";import{f as j}from"./dateUtils-CyxmbFrV.js";import{l as oe}from"./apiFactory-ClI1cCsn.js";import{_ as ne}from"./BasicForm.vuevuetypescriptsetuptruelang-ABWM0eVX.js";import{_ as se}from"./BasicDetail.vuevuetypescriptsetuptruelang-Bnirpzwa.js";import{A as re}from"./AutoTooltip-rnH6gMxD.js";import{u as ie}from"./main-cgMtkIPo.js";import{d as ue,r,g as de,$ as pe,a as s,o as me,I as ce,e,w as a,u as n,l as h,X as m,Z as p,Y as g,n as fe,C as _e,D as ge}from"./index-CIcVr1hx.js";import{_ as be}from"./plugin-vueexport-helper-DlAUqK2U.js";import"./marketingApi-SjjHtNYj.js";const Y=v=>(_e("data-v-6cd56321"),v=v(),ge(),v),ve={style:{display:"flex",width:"100%"}},ye=Y(()=>m("div",{style:{flex:"1"}},null,-1)),De={class:"custom-style",style:{"margin-bottom":"12px",display:"flex"}},we=Y(()=>m("span",null,"新建",-1)),xe=Y(()=>m("div",{style:{flex:"1"}},null,-1)),he={style:{"margin-top":"20px"}},ke=ue({__name:"BasicTable",props:{query:Object},setup(v){const k=ie(),B=r(),S=r(),U=r([]),y=r(10),D=r(1),R=r(0),w=r(),c=de({name:"",beginDate:"",endDate:"",region:[],jit:[]});r(!0);const O=r(""),_=r(!1),C=r(!1),b=r(1),I=[{label:"跳转到编辑页面",value:1},{label:"打开编辑弹出框",value:2}];pe(()=>{f()});async function f(){const o=$(),l=await oe(o),{list:u,pageInfo:i}=l.data;console.log("list",u),U.value=u,R.value=i.total}function $(){const o={};return o.pageSize=y.value,o.pageNumber=D.value,w.value&&(o.orderBy=w.value),["name","beginDate","endDate","jit","region"].forEach(u=>{const i=c[u];i!==""&&(o[u]=i)}),o}function P(o){const{prop:l,order:u}=o;if(!u)w.value=null;else{const i=u.indexOf("asc")===0?"asc":"desc";w.value=l+","+i}f()}function F(o){o.resetFields(),f()}function J(o){return{shanghai:"区域一",beijing:"区域二"}[o]}function A(o){return{0:"否",1:"是"}[o]}function E(o){return{1:"线上品牌商赞助",2:"线下场地免费"}[o]}function q(){b.value===1?k.push({name:"createForm"}):(C.value=!1,_.value=!0)}async function X(o){const l=JSON.parse(JSON.stringify(o));b.value===1?k.push({name:"updateForm"}).then(()=>{M.emit("updateUser",l)}):(C.value=!0,_.value=!0,await fe(),M.emit("updateUser",l))}function Z(o){const l=JSON.parse(JSON.stringify(o));k.push({name:"basicDetail"}).then(()=>{M.emit("viewUser",l)})}function G(){_.value=!1,f()}return(o,l)=>{const u=s("el-input"),i=s("el-form-item"),x=s("el-col"),z=s("el-date-picker"),V=s("el-button"),H=s("el-row"),K=s("el-form"),N=s("el-card"),L=s("Plus"),Q=s("el-icon"),W=s("el-segmented"),d=s("el-table-column"),T=s("el-link"),ee=s("el-table"),te=s("el-pagination"),le=s("el-dialog");return me(),ce("div",null,[e(N,null,{default:a(()=>[e(K,{ref_key:"formRef",ref:S,model:n(c),inline:!0,"label-width":"auto"},{default:a(()=>[e(H,{gutter:20},{default:a(()=>[e(x,{span:6},{default:a(()=>[e(i,{label:"活动名称",prop:"name"},{default:a(()=>[e(u,{modelValue:n(c).name,"onUpdate:modelValue":l[0]||(l[0]=t=>n(c).name=t),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1})]),_:1}),e(x,{span:6},{default:a(()=>[e(i,{label:"开始时间",prop:"beginDate"},{default:a(()=>[e(z,{placeholder:"开始时间",modelValue:n(c).beginDate,"onUpdate:modelValue":l[1]||(l[1]=t=>n(c).beginDate=t),type:"date","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(x,{span:6},{default:a(()=>[e(i,{label:"结束时间",prop:"endDate"},{default:a(()=>[e(z,{placeholder:"结束时间",modelValue:n(c).endDate,"onUpdate:modelValue":l[2]||(l[2]=t=>n(c).endDate=t),type:"date","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(x,{span:6,style:{"margin-left":"auto","margin-bottom":"0px"}},{default:a(()=>[e(i,{label:""},{default:a(()=>[m("div",ve,[ye,e(V,{onClick:l[3]||(l[3]=t=>F(n(S)))},{default:a(()=>[p("重置")]),_:1}),e(V,{type:"primary",onClick:f},{default:a(()=>[p("查询")]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(N,{style:{"margin-top":"20px"}},{default:a(()=>[m("div",De,[m("div",null,[e(V,{type:"primary",onClick:q},{default:a(()=>[e(Q,null,{default:a(()=>[e(L)]),_:1}),we]),_:1})]),xe,m("div",null,[e(W,{modelValue:n(b),"onUpdate:modelValue":l[4]||(l[4]=t=>h(b)?b.value=t:null),options:I,style:{"margin-left":"20px"}},{default:a(({item:t})=>[m("div",null,g(t.label),1)]),_:1},8,["modelValue"])])]),e(ee,{border:"",stripe:"",style:{width:"100%"},ref_key:"tableRef",ref:B,data:n(U),onSortChange:P},{default:a(()=>[e(d,{fixed:"",type:"expand"},{default:a(t=>[e(se,{data:t.row,style:{margin:"8px 20px"}},null,8,["data"])]),_:1}),e(d,{fixed:"",prop:"name",label:"活动名称",width:"180"}),e(d,{prop:"region",label:"活动区域"},{default:a(t=>[p(g(J(t.row.region)),1)]),_:1}),e(d,{prop:"beginDate",label:"开始时间",sortable:"custom"},{default:a(t=>[p(g(n(j)(t.row.beginDate,"YYYY-MM-DD")),1)]),_:1}),e(d,{prop:"endDate",label:"结束时间"},{default:a(t=>[p(g(n(j)(t.row.endDate,"YYYY-MM-DD")),1)]),_:1}),e(d,{prop:"jit",label:"即时配送"},{default:a(t=>[p(g(A(t.row.jit)),1)]),_:1}),e(d,{prop:"resource",label:"特殊资源"},{default:a(t=>[p(g(E(t.row.resource)),1)]),_:1}),e(d,{prop:"desc",label:"活动形式"},{default:a(t=>[e(re,{content:t.row.desc},null,8,["content"])]),_:1}),e(d,{fixed:"right",label:"操作",width:"100"},{default:a(t=>[e(T,{underline:!1,type:"primary",onClick:ae=>Z(t.row)},{default:a(()=>[p("查看")]),_:2},1032,["onClick"]),e(T,{underline:!1,type:"primary",onClick:ae=>X(t.row),style:{"margin-left":"10px"}},{default:a(()=>[p("编辑")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),m("div",he,[e(te,{layout:"total, prev, pager, next, sizes","current-page":n(D),"onUpdate:currentPage":l[5]||(l[5]=t=>h(D)?D.value=t:null),"page-size":n(y),"onUpdate:pageSize":l[6]||(l[6]=t=>h(y)?y.value=t:null),"page-sizes":[10,20,50,100],total:n(R),onSizeChange:f,onCurrentChange:f},null,8,["current-page","page-size","total"])])]),_:1}),e(le,{modelValue:n(_),"onUpdate:modelValue":l[7]||(l[7]=t=>h(_)?_.value=t:null),title:n(O),"close-on-click-modal":!1,width:"50%"},{default:a(()=>[e(ne,{"is-dialog":!0,"is-update":n(C),onClose:G},null,8,["is-update"])]),_:1},8,["modelValue","title"])])}}}),je=be(ke,[["__scopeId","data-v-6cd56321"]]);export{je as default};
