import{b as S}from"./bus.Bkllrw1a.2024-07-17_1258.js";import{f as N}from"./dateUtils.Bs_j5sTr.2024-07-17_1258.js";import{l as ne}from"./apiFactory.CAGB5SN5.2024-07-17_1258.js";import{_ as re}from"./AddMarketing.vuevuetypescriptsetuptruelang.DzYgHaCE.2024-07-17_1258.js";import{_ as ie}from"./EditMarketing.vuevuetypescriptsetuptruelang.BqjA4iqO.2024-07-17_1258.js";import{_ as se}from"./BasicDetail.vuevuetypescriptsetuptruelang.B7AX0NXc.2024-07-17_1258.js";import{A as pe}from"./AutoTooltip.DtV9tuj9.2024-07-17_1258.js";import{u as ue}from"./vue-router.DlIqcYvR.2024-07-17_1258.js";import{d as me,e as i,Z as de,j as ce,ah as r,o as O,c as fe,U as e,O as a,u as n,D as h,a as d,S as m,T as g,M as _e,Q as ge,n as ve,ay as be,az as ye}from"./@vue.DR0bNimP.2024-07-17_1258.js";import{_ as De}from"./plugin-vueexport-helper.DlAUqK2U.2024-07-17_1258.js";import"./mitt.DJ65BbbF.2024-07-17_1258.js";import"./dayjs.DJMltt-O.2024-07-17_1258.js";import"./call-bind.D4Qxyof_.2024-07-17_1258.js";import"./get-intrinsic.CjFK80KK.2024-07-17_1258.js";import"./es-errors.DzOT6E3C.2024-07-17_1258.js";import"./has-symbols.eVqrYdw7.2024-07-17_1258.js";import"./has-proto.JnoBQRdH.2024-07-17_1258.js";import"./function-bind.BbkWVFrm.2024-07-17_1258.js";import"./hasown.CQ6MvG1E.2024-07-17_1258.js";import"./set-function-length.9j_ZXv4y.2024-07-17_1258.js";import"./define-data-property.CsoVXVIa.2024-07-17_1258.js";import"./es-define-property.L9kauNg3.2024-07-17_1258.js";import"./gopd.BhGRosE1.2024-07-17_1258.js";import"./has-property-descriptors.CjB1m-qY.2024-07-17_1258.js";import"./marketingApi.CpdHMJCU.2024-07-17_1258.js";import"./qs.Dk5Xq4N8.2024-07-17_1258.js";import"./side-channel.CdPVQs2j.2024-07-17_1258.js";import"./object-inspect.DJpltaLG.2024-07-17_1258.js";import"./axios.B4uVmeYG.2024-07-17_1258.js";import"./http.C1TganUN.2024-07-17_1258.js";import"./element-plus.CSfJK5WV.2024-07-17_1258.js";import"./lodash-es.DvWjmQkM.2024-07-17_1258.js";import"./@vueuse.AtDz_kXm.2024-07-17_1258.js";import"./@element-plus.CMqxRFBv.2024-07-17_1258.js";import"./@popperjs.D9SI2xQl.2024-07-17_1258.js";import"./@ctrl.r5W6hzzQ.2024-07-17_1258.js";import"./async-validator.DKvM95Vc.2024-07-17_1258.js";import"./memoize-one.BdPwpGay.2024-07-17_1258.js";import"./normalize-wheel-es.B6fDCfyv.2024-07-17_1258.js";import"./@floating-ui.DgZhbb76.2024-07-17_1258.js";const Y=b=>(be("data-v-6b76511f"),b=b(),ye(),b),we={style:{display:"flex",width:"100%"}},xe=Y(()=>d("div",{style:{flex:"1"}},null,-1)),he={class:"custom-style",style:{"margin-bottom":"12px",display:"flex"}},ke=Y(()=>d("span",null,"新建",-1)),Ce=Y(()=>d("div",{style:{flex:"1"}},null,-1)),Me={style:{"margin-top":"20px"}},Ve=me({__name:"BasicTable",props:{query:Object},setup(b){const k=ue(),$=i(),U=i(),z=i([]),y=i(10),D=i(1),R=i(0),w=i(),c=de({name:"",beginDate:"",endDate:"",region:[],jit:[]});i(!0);const C=i(""),_=i(!1),M=i(!1),v=i(1),I=[{label:"跳转到编辑页面",value:1},{label:"打开编辑弹出框",value:2}];ce(()=>{f()});async function f(){const l=P(),o=await ne(l),{list:p,pageInfo:s}=o.data;console.log("list",p),z.value=p,R.value=s.total}function P(){const l={};return l.pageSize=y.value,l.pageNumber=D.value,w.value&&(l.orderBy=w.value),["name","beginDate","endDate","jit","region"].forEach(p=>{const s=c[p];s!==""&&(l[p]=s)}),l}function J(l){const{prop:o,order:p}=l;if(!p)w.value=null;else{const s=p.indexOf("asc")===0?"asc":"desc";w.value=o+","+s}f()}function A(l){l.resetFields(),f()}function E(l){return{shanghai:"区域一",beijing:"区域二"}[l]}function F(l){return{0:"否",1:"是"}[l]}function q(l){return{1:"线上品牌商赞助",2:"线下场地免费"}[l]}function Q(){v.value===1?k.push({path:"/form/create"}):(C.value="新建活动",M.value=!1,_.value=!0)}async function Z(l){const o=JSON.parse(JSON.stringify(l));v.value===1?k.push({path:"/form/update"}).then(()=>{S.emit("updateUser",o)}):(C.value="编辑活动",M.value=!0,_.value=!0,await ve(),S.emit("updateUser",o))}function G(l){const o=JSON.parse(JSON.stringify(l));k.push({name:"basicDetail",params:{id:l.id}}).then(()=>{S.emit("viewUser",o)})}function H(){_.value=!1,f()}return(l,o)=>{const p=r("el-input"),s=r("el-form-item"),x=r("el-col"),T=r("el-date-picker"),V=r("el-button"),K=r("el-row"),L=r("el-form"),j=r("el-card"),W=r("Plus"),X=r("el-icon"),ee=r("el-segmented"),u=r("el-table-column"),B=r("el-link"),te=r("el-table"),oe=r("el-pagination"),ae=r("el-dialog");return O(),fe("div",null,[e(j,null,{default:a(()=>[e(L,{ref_key:"formRef",ref:U,model:n(c),inline:!0,"label-width":"auto"},{default:a(()=>[e(K,{gutter:20},{default:a(()=>[e(x,{span:6},{default:a(()=>[e(s,{label:"活动名称",prop:"name"},{default:a(()=>[e(p,{modelValue:n(c).name,"onUpdate:modelValue":o[0]||(o[0]=t=>n(c).name=t),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1})]),_:1}),e(x,{span:6},{default:a(()=>[e(s,{label:"开始时间",prop:"beginDate"},{default:a(()=>[e(T,{placeholder:"开始时间",modelValue:n(c).beginDate,"onUpdate:modelValue":o[1]||(o[1]=t=>n(c).beginDate=t),type:"date","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(x,{span:6},{default:a(()=>[e(s,{label:"结束时间",prop:"endDate"},{default:a(()=>[e(T,{placeholder:"结束时间",modelValue:n(c).endDate,"onUpdate:modelValue":o[2]||(o[2]=t=>n(c).endDate=t),type:"date","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(x,{span:6,style:{"margin-left":"auto","margin-bottom":"0px"}},{default:a(()=>[e(s,{label:""},{default:a(()=>[d("div",we,[xe,e(V,{onClick:o[3]||(o[3]=t=>A(n(U)))},{default:a(()=>[m("重置")]),_:1}),e(V,{type:"primary",onClick:f},{default:a(()=>[m("查询")]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(j,{style:{"margin-top":"20px"}},{default:a(()=>[d("div",he,[d("div",null,[e(V,{type:"primary",onClick:Q},{default:a(()=>[e(X,null,{default:a(()=>[e(W)]),_:1}),ke]),_:1})]),Ce,d("div",null,[e(ee,{modelValue:n(v),"onUpdate:modelValue":o[4]||(o[4]=t=>h(v)?v.value=t:null),options:I,style:{"margin-left":"20px"}},{default:a(({item:t})=>[d("div",null,g(t.label),1)]),_:1},8,["modelValue"])])]),e(te,{border:"",stripe:"",style:{width:"100%"},ref_key:"tableRef",ref:$,data:n(z),onSortChange:J},{default:a(()=>[e(u,{fixed:"",type:"expand"},{default:a(t=>[e(se,{data:t.row,style:{margin:"8px 20px"}},null,8,["data"])]),_:1}),e(u,{fixed:"",prop:"name",label:"活动名称",width:"180"}),e(u,{prop:"region",label:"活动区域"},{default:a(t=>[m(g(E(t.row.region)),1)]),_:1}),e(u,{prop:"beginDate",label:"开始时间",sortable:"custom"},{default:a(t=>[m(g(n(N)(t.row.beginDate,"YYYY-MM-DD")),1)]),_:1}),e(u,{prop:"endDate",label:"结束时间"},{default:a(t=>[m(g(n(N)(t.row.endDate,"YYYY-MM-DD")),1)]),_:1}),e(u,{prop:"jit",label:"即时配送"},{default:a(t=>[m(g(F(t.row.jit)),1)]),_:1}),e(u,{prop:"resource",label:"特殊资源"},{default:a(t=>[m(g(q(t.row.resource)),1)]),_:1}),e(u,{prop:"desc",label:"活动形式"},{default:a(t=>[e(pe,{content:t.row.desc},null,8,["content"])]),_:1}),e(u,{fixed:"right",label:"操作",width:"100"},{default:a(t=>[e(B,{underline:!1,type:"primary",onClick:le=>G(t.row)},{default:a(()=>[m("查看")]),_:2},1032,["onClick"]),e(B,{underline:!1,type:"primary",onClick:le=>Z(t.row),style:{"margin-left":"10px"}},{default:a(()=>[m("编辑")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),d("div",Me,[e(oe,{layout:"total, prev, pager, next, sizes","current-page":n(D),"onUpdate:currentPage":o[5]||(o[5]=t=>h(D)?D.value=t:null),"page-size":n(y),"onUpdate:pageSize":o[6]||(o[6]=t=>h(y)?y.value=t:null),"page-sizes":[10,20,50,100],total:n(R),onSizeChange:f,onCurrentChange:f},null,8,["current-page","page-size","total"])])]),_:1}),e(ae,{modelValue:n(_),"onUpdate:modelValue":o[7]||(o[7]=t=>h(_)?_.value=t:null),title:n(C),"close-on-click-modal":!1,width:"50%"},{default:a(()=>[(O(),_e(ge(n(M)?ie:re),{"is-dialog":!0,onClose:H},null,32))]),_:1},8,["modelValue","title"])])}}}),ft=De(Ve,[["__scopeId","data-v-6b76511f"]]);export{ft as default};
