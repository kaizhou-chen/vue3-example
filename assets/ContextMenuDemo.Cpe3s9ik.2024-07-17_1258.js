import{e as n,j as D,A as z,d as E,k as H,o as i,c as r,H as V,M as $,u as c,P as N,J as P,F as W,a7 as F,R as I,a5 as O,T as v,U as h,O as _,a as x}from"./@vue.DR0bNimP.2024-07-17_1258.js";import{v as R}from"./VSizeOb.DRQrTpX6.2024-07-17_1258.js";import{_ as M}from"./plugin-vueexport-helper.DlAUqK2U.2024-07-17_1258.js";import"./lodash-es.DvWjmQkM.2024-07-17_1258.js";function T(d){const a=n(!1),u=n(0),s=n(0);D(()=>{d.value.addEventListener("contextmenu",t),window.addEventListener("click",o,!0),window.addEventListener("contextmenu",o,!0)}),z(()=>{d.value.removeEventListener("contextmenu",t),window.removeEventListener("click",o,!0),window.removeEventListener("contextmenu",o,!0)});function o(){a.value=!1}const t=e=>{e.preventDefault(),e.stopPropagation(),a.value=!0,u.value=e.clientX,s.value=e.clientY};return{showMenu:a,x:u,y:s}}const y=n(document.documentElement.clientWidth),g=n(document.documentElement.clientHeight);document.addEventListener("resize",()=>{y.value=document.documentElement.clientWidth,g.value=document.documentElement.clientHeight});function U(){return{vw:y,vh:g}}const j=["onClick"],A=E({__name:"ContextMenu",props:{menu:{default:[]}},emits:["select"],setup(d,{emit:a}){const u=a,s=n(null),{x:o,y:t,showMenu:e}=T(s),{vw:L,vh:k}=U(),m=n(0),f=n(0),C=H(()=>{let l=o.value,p=t.value;return o.value>L.value-m.value&&(l=o.value-m.value),t.value>k.value-f.value&&(p=k.value-f.value),{left:l,top:p}});function S(l){m.value=l.width,f.value=l.height}function B(l){e.value=!1,u("select",l)}return(l,p)=>(i(),r("div",{ref_key:"containerRef",ref:s},[V(l.$slots,"default",{},void 0,!0),(i(),$(O,{to:"body"},[c(e)?N((i(),r("div",{key:0,class:"context-menu",style:P({left:c(C).left+"px",top:c(C).top+"px"})},[(i(!0),r(W,null,F(l.menu,(b,Y)=>(i(),r("div",{class:"menu-item",key:b.label,onClick:q=>B(b)},v(b.label),9,j))),128))],4)),[[c(R),S]]):I("",!0)]))],512))}}),w=M(A,[["__scopeId","data-v-b2fbcab7"]]),J={class:"container"},X=E({__name:"ContextMenuDemo",setup(d){const a=n(""),u=n(""),s=n("");return(o,t)=>(i(),r("div",J,[h(w,{class:"block-1",menu:[{label:"添加"},{label:"编辑"},{label:"删除"},{label:"查看"},{label:"复制"}],onSelect:t[0]||(t[0]=e=>a.value=e.label)},{default:_(()=>[x("h2",null,v(c(a)),1)]),_:1}),h(w,{class:"block-2",menu:[{label:"员工"},{label:"部门"},{label:"角色"},{label:"权限"},{label:"菜单"}],onSelect:t[2]||(t[2]=e=>u.value=e.label)},{default:_(()=>[x("h2",null,v(c(u)),1),h(w,{class:"block-3",menu:[{label:"菜单1"},{label:"菜单2"},{label:"菜单3"},{label:"菜单4"}],onSelect:t[1]||(t[1]=e=>s.value=e.label)},{default:_(()=>[x("h2",null,v(c(s)),1)]),_:1})]),_:1})]))}}),ee=M(X,[["__scopeId","data-v-7e780bca"]]);export{ee as default};
