import{r as n,$ as D,a0 as $,d as E,c as z,o as i,I as r,J as H,b as V,u as c,H as I,Q as N,L as W,M as P,K as X,ag as Y,Y as v,e as h,w as _,X as x}from"./index.ZB1ftQx1.2024-07-15_03.43.55.js";import{v as F}from"./VSizeOb.DaYb2s72.2024-07-15_03.43.55.js";import{_ as M}from"./plugin-vueexport-helper.DlAUqK2U.2024-07-15_03.43.55.js";function J(d){const a=n(!1),u=n(0),s=n(0);D(()=>{d.value.addEventListener("contextmenu",t),window.addEventListener("click",o,!0),window.addEventListener("contextmenu",o,!0)}),$(()=>{d.value.removeEventListener("contextmenu",t),window.removeEventListener("click",o,!0),window.removeEventListener("contextmenu",o,!0)});function o(){a.value=!1}const t=e=>{e.preventDefault(),e.stopPropagation(),a.value=!0,u.value=e.clientX,s.value=e.clientY};return{showMenu:a,x:u,y:s}}const g=n(document.documentElement.clientWidth),y=n(document.documentElement.clientHeight);document.addEventListener("resize",()=>{g.value=document.documentElement.clientWidth,y.value=document.documentElement.clientHeight});function K(){return{vw:g,vh:y}}const O=["onClick"],Q=E({__name:"ContextMenu",props:{menu:{default:[]}},emits:["select"],setup(d,{emit:a}){const u=a,s=n(null),{x:o,y:t,showMenu:e}=J(s),{vw:L,vh:k}=K(),m=n(0),f=n(0),C=z(()=>{let l=o.value,b=t.value;return o.value>L.value-m.value&&(l=o.value-m.value),t.value>k.value-f.value&&(b=k.value-f.value),{left:l,top:b}});function S(l){m.value=l.width,f.value=l.height}function B(l){e.value=!1,u("select",l)}return(l,b)=>(i(),r("div",{ref_key:"containerRef",ref:s},[H(l.$slots,"default",{},void 0,!0),(i(),V(Y,{to:"body"},[c(e)?I((i(),r("div",{key:0,class:"context-menu",style:N({left:c(C).left+"px",top:c(C).top+"px"})},[(i(!0),r(W,null,P(l.menu,(p,U)=>(i(),r("div",{class:"menu-item",key:p.label,onClick:j=>B(p)},v(p.label),9,O))),128))],4)),[[c(F),S]]):X("",!0)]))],512))}}),w=M(Q,[["__scopeId","data-v-b2fbcab7"]]),R={class:"container"},T=E({__name:"ContextMenuDemo",setup(d){const a=n(""),u=n(""),s=n("");return(o,t)=>(i(),r("div",R,[h(w,{class:"block-1",menu:[{label:"添加"},{label:"编辑"},{label:"删除"},{label:"查看"},{label:"复制"}],onSelect:t[0]||(t[0]=e=>a.value=e.label)},{default:_(()=>[x("h2",null,v(c(a)),1)]),_:1}),h(w,{class:"block-2",menu:[{label:"员工"},{label:"部门"},{label:"角色"},{label:"权限"},{label:"菜单"}],onSelect:t[2]||(t[2]=e=>u.value=e.label)},{default:_(()=>[x("h2",null,v(c(u)),1),h(w,{class:"block-3",menu:[{label:"菜单1"},{label:"菜单2"},{label:"菜单3"},{label:"菜单4"}],onSelect:t[1]||(t[1]=e=>s.value=e.label)},{default:_(()=>[x("h2",null,v(c(s)),1)]),_:1})]),_:1})]))}}),Z=M(T,[["__scopeId","data-v-7e780bca"]]);export{Z as default};
