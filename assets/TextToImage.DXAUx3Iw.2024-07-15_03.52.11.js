import{d as U,r as u,$ as q,an as W,a as d,o as V,b as B,w as p,X as t,e as n,u as a,ao as E,l as g,Y as C,I as L,Q as A,C as D,D as X,n as j}from"./index.D1eludE9.2024-07-15_03.52.11.js";import{_ as M}from"./plugin-vueexport-helper.DlAUqK2U.2024-07-15_03.52.11.js";const I=m=>(D("data-v-5831ffa9"),m=m(),X(),m),N={style:{display:"flex"}},H=I(()=>t("div",null,"文字转图片",-1)),O={style:{"margin-bottom":"20px",display:"flex"}},Q={style:{display:"flex"}},Y={style:{display:"flex"}},$={class:"text"},F={style:{display:"flex","justify-content":"center"}},G={class:"svg"},J=I(()=>t("div",{class:"helper"},[t("canvas"),t("img")],-1)),K=U({__name:"TextToImage",setup(m){const r=u(),s=u(""),v=u({fontSize:"50px",fontWeight:"bold",paintOrder:"stroke",strokeLinejoin:"round",strokeWidth:"1px",stroke:"black",fill:"none"}),_=u(""),f=u(1),h=u("rgba(0,0,0,1)");q(()=>{b()}),W(async()=>{s.value,v.value.fill=_.value||"none",v.value.stroke=h.value||"none",v.value.strokeWidth=f.value+"px",await j(),b()});function b(){const l=r.value.querySelector("img"),e=r.value.querySelector("canvas").getContext("2d"),{width:o,height:i}=S(),x=T(),k="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(x)));l.addEventListener("load",w=>{e.canvas.width=o,e.canvas.height=i,e.clearRect(0,0,e.canvas.width,e.canvas.height),e.drawImage(w.target,0,0)}),l.src=k}function S(){const l=r.value.querySelector(".text");return{width:l.clientWidth,height:l.clientHeight}}function T(){const{width:l,height:e}=S(),o=r.value.querySelector(".svg");return o.setAttribute("width",l),o.setAttribute("height",e),new XMLSerializer().serializeToString(o)}function z(){const e=r.value.querySelector("canvas").toDataURL("image/png"),o=document.createElement("a");o.href=e,o.setAttribute("download",s.value+".png"),document.body.appendChild(o),o.click(),document.body.removeChild(o)}return(l,e)=>{const o=d("el-button"),i=d("el-tooltip"),x=d("el-input"),y=d("el-color-picker"),k=d("el-divider"),w=d("el-input-number"),R=d("el-card");return V(),B(R,{style:{width:"425px"}},{header:p(()=>[t("div",N,[H,n(i,{effect:"dark",placement:"top",content:"下载图片"},{default:p(()=>[n(o,{type:"info",icon:a(E),circle:"",size:"small",onClick:z,style:{"margin-left":"auto"}},null,8,["icon"])]),_:1})])]),default:p(()=>[t("div",{ref_key:"containerRef",ref:r},[t("div",O,[t("div",Q,[n(x,{modelValue:a(s),"onUpdate:modelValue":e[0]||(e[0]=c=>g(s)?s.value=c:null),placeholder:"请输入文字",maxlength:5,"show-word-limit":""},null,8,["modelValue"]),n(i,{effect:"dark",placement:"top",content:"文字颜色"},{default:p(()=>[t("div",null,[n(y,{modelValue:a(_),"onUpdate:modelValue":e[1]||(e[1]=c=>g(_)?_.value=c:null),"show-alpha":""},null,8,["modelValue"])])]),_:1})]),n(k,{direction:"vertical",style:{height:"30px"}}),t("div",Y,[n(i,{effect:"dark",placement:"top",content:"描边宽度"},{default:p(()=>[n(w,{modelValue:a(f),"onUpdate:modelValue":e[2]||(e[2]=c=>g(f)?f.value=c:null),min:0,max:5},null,8,["modelValue"])]),_:1}),n(i,{effect:"dark",placement:"top",content:"描边颜色"},{default:p(()=>[t("div",null,[n(y,{modelValue:a(h),"onUpdate:modelValue":e[3]||(e[3]=c=>g(h)?h.value=c:null),"show-alpha":""},null,8,["modelValue"])])]),_:1})])]),t("div",$,C(a(s)),1),t("div",F,[(V(),L("svg",G,[t("text",{x:"50%",y:"86%","text-anchor":"middle",style:A(a(v))},C(a(s)),5)]))]),J],512)]),_:1})}}}),ee=M(K,[["__scopeId","data-v-5831ffa9"]]);export{ee as default};
