import{h as T,d as W,ab as E,ac as I,r as b,a as N,o as j,I as w,e as H,X as A,u as k,Q as M}from"./index-DUm034Nc.js";import{_ as O}from"./plugin-vueexport-helper-DlAUqK2U.js";var z={exports:{}};(function(u){u.exports=function(h){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={exports:{},id:n,loaded:!1};return h[n].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}return a.m=h,a.c=t,a.p="",a(0)}([function(h,t,a){h.exports=a(1)},function(h,t,a){Object.defineProperty(t,"__esModule",{value:!0});var n=a(2);Object.defineProperty(t,"combineChunks",{enumerable:!0,get:function(){return n.combineChunks}}),Object.defineProperty(t,"fillInChunks",{enumerable:!0,get:function(){return n.fillInChunks}}),Object.defineProperty(t,"findAll",{enumerable:!0,get:function(){return n.findAll}}),Object.defineProperty(t,"findChunks",{enumerable:!0,get:function(){return n.findChunks}})},function(h,t){Object.defineProperty(t,"__esModule",{value:!0}),t.findAll=function(i){var l=i.autoEscape,e=i.caseSensitive,o=e===void 0?!1:e,s=i.findChunks,c=s===void 0?n:s,g=i.sanitize,m=i.searchWords,d=i.textToHighlight;return r({chunksToHighlight:a({chunks:c({autoEscape:l,caseSensitive:o,sanitize:g,searchWords:m,textToHighlight:d})}),totalLength:d?d.length:0})};var a=t.combineChunks=function(i){var l=i.chunks;return l=l.sort(function(e,o){return e.start-o.start}).reduce(function(e,o){if(e.length===0)return[o];var s=e.pop();if(o.start<=s.end){var c=Math.max(s.end,o.end);e.push({highlight:!1,start:s.start,end:c})}else e.push(s,o);return e},[]),l},n=function(i){var l=i.autoEscape,e=i.caseSensitive,o=i.sanitize,s=o===void 0?p:o,c=i.searchWords,g=i.textToHighlight;return g=s(g),c.filter(function(m){return m}).reduce(function(m,d){d=s(d),l&&(d=v(d));for(var x=new RegExp(d,e?"g":"gi"),y=void 0;y=x.exec(g);){var C=y.index,S=x.lastIndex;S>C&&m.push({highlight:!1,start:C,end:S}),y.index===x.lastIndex&&x.lastIndex++}return m},[])};t.findChunks=n;var r=t.fillInChunks=function(i){var l=i.chunksToHighlight,e=i.totalLength,o=[],s=function(m,d,x){d-m>0&&o.push({start:m,end:d,highlight:x})};if(l.length===0)s(0,e,!1);else{var c=0;l.forEach(function(g){s(c,g.start,!1),s(g.start,g.end,!0),c=g.end}),s(c,e,!1)}return o};function p(f){return f}function v(f){return f.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}}])})(z);var $=z.exports;const V=(u,h)=>{const t=$.findAll({autoEscape:u.autoEscape,caseSensitive:u.caseSensitive,findChunks:u.findChunks,sanitize:u.sanitize,searchWords:u.searchWords,textToHighlight:u.textToHighlight}),a=P(u,t),n=h.slots;return n.default?n.default&&n.default(a):T("span",{...h.attrs},a.map(({chunk:r,text:p,attrs:v})=>r.highlight?T("mark",v,[p]):p))},_={};function P(u,h){let t=-1,a="",n={};const{textToHighlight:r,highlightClassName:p,highlightStyle:v=_,activeIndex:f,activeClassName:i,activeStyle:l=_}=u;return h.map((e,o)=>{const s=r.substr(e.start,e.end-e.start);if(e.highlight){t++;const c=t===+(f||-1);return a=`${p} ${c?i:""}`,n=c===!0&&l!=null?{...v,...l}:v,{chunk:e,text:s,attrs:{class:a,key:o,style:n,highlightIndex:t}}}else return{chunk:e,text:s}})}V.props={activeClassName:String,activeIndex:Number,activeStyle:Object,autoEscape:Boolean,caseSensitive:{type:Boolean,defualt:!1},findChunks:Function,custom:{type:Boolean,default:!1},highlightClassName:String,highlightStyle:Object,sanitize:Function,searchWords:{type:Array,validator(u){return u.every(h=>typeof h=="string")},required:!0},textToHighlight:{type:String,required:!0}};const B=V,F={class:"ux-textarea"},q=W({__name:"TextareaHighlight",props:E({searchWords:{},placeholder:{},rows:{}},{modelValue:{default:""},modelModifiers:{}}),emits:E(["input"],["update:modelValue"]),setup(u,{emit:h}){const t=I(u,"modelValue"),a=u,n=h,r=b(),p=b(),v=b("translate(0px, 0px)");function f(l){n("input",l)}function i(l){requestAnimationFrame(()=>{const e=r.value.textarea;p.value.height=e.clientHeight+"px",v.value=`translate(0px, -${e.scrollTop}px)`})}return(l,e)=>{const o=N("el-input");return j(),w("div",F,[H(o,{ref_key:"inputEl",ref:r,modelValue:t.value,"onUpdate:modelValue":e[0]||(e[0]=s=>t.value=s),type:"textarea",placeholder:l.placeholder,rows:a.rows?a.rows:2,onInput:f,onScroll:i},null,8,["modelValue","placeholder","rows"]),A("div",{ref_key:"highlightEl",ref:p,class:"ux-highlight",style:M({transform:k(v)})},[H(k(B),{searchWords:l.searchWords,textToHighlight:t.value,highlightClassName:"highlight"},null,8,["searchWords","textToHighlight"])],4)])}}}),Y=O(q,[["__scopeId","data-v-499885ba"]]);export{Y as default};
