import{b as Y}from"./bus.CdlF-dbX.2024-07-15_03.43.55.js";import{f as j}from"./dateUtils.B9q3C6W0.2024-07-15_03.43.55.js";import{l as ne}from"./apiFactory.D-ogjA2I.2024-07-15_03.43.55.js";import{_ as se}from"./AddMarketing.vuevuetypescriptsetuptruelang.QXBLwfsp.2024-07-15_03.43.55.js";import{_ as re}from"./EditMarketing.vuevuetypescriptsetuptruelang.C1CTBZCe.2024-07-15_03.43.55.js";import{_ as ie}from"./BasicDetail.vuevuetypescriptsetuptruelang.CwYcWX-s.2024-07-15_03.43.55.js";import{A as ue}from"./AutoTooltip.xwVOQ_Gg.2024-07-15_03.43.55.js";import{u as pe}from"./main.Cxf_rs01.2024-07-15_03.43.55.js";import{d as de,r,g as me,$ as ce,a as s,o as O,I as fe,e,w as a,u as n,l as h,X as m,Z as d,Y as g,b as _e,N as ge,n as be,C as ve,D as ye}from"./index.ZB1ftQx1.2024-07-15_03.43.55.js";import{_ as De}from"./plugin-vueexport-helper.DlAUqK2U.2024-07-15_03.43.55.js";import"./marketingApi.CeFLiX_l.2024-07-15_03.43.55.js";const S=v=>(ve("data-v-6b76511f"),v=v(),ye(),v),we={style:{display:"flex",width:"100%"}},xe=S(()=>m("div",{style:{flex:"1"}},null,-1)),he={class:"custom-style",style:{"margin-bottom":"12px",display:"flex"}},ke=S(()=>m("span",null,"新建",-1)),Ce=S(()=>m("div",{style:{flex:"1"}},null,-1)),Ve={style:{"margin-top":"20px"}},Me=de({__name:"BasicTable",props:{query:Object},setup(v){const k=pe(),$=r(),U=r(),N=r([]),y=r(10),D=r(1),R=r(0),w=r(),c=me({name:"",beginDate:"",endDate:"",region:[],jit:[]});r(!0);const C=r(""),_=r(!1),V=r(!1),b=r(1),I=[{label:"跳转到编辑页面",value:1},{label:"打开编辑弹出框",value:2}];ce(()=>{f()});async function f(){const o=P(),l=await ne(o),{list:u,pageInfo:i}=l.data;console.log("list",u),N.value=u,R.value=i.total}function P(){const o={};return o.pageSize=y.value,o.pageNumber=D.value,w.value&&(o.orderBy=w.value),["name","beginDate","endDate","jit","region"].forEach(u=>{const i=c[u];i!==""&&(o[u]=i)}),o}function J(o){const{prop:l,order:u}=o;if(!u)w.value=null;else{const i=u.indexOf("asc")===0?"asc":"desc";w.value=l+","+i}f()}function A(o){o.resetFields(),f()}function E(o){return{shanghai:"区域一",beijing:"区域二"}[o]}function F(o){return{0:"否",1:"是"}[o]}function q(o){return{1:"线上品牌商赞助",2:"线下场地免费"}[o]}function X(){b.value===1?k.push({path:"/form/create"}):(C.value="新建活动",V.value=!1,_.value=!0)}async function Z(o){const l=JSON.parse(JSON.stringify(o));b.value===1?k.push({path:"/form/update"}).then(()=>{Y.emit("updateUser",l)}):(C.value="编辑活动",V.value=!0,_.value=!0,await be(),Y.emit("updateUser",l))}function G(o){const l=JSON.parse(JSON.stringify(o));k.push({name:"basicDetail",params:{id:o.id}}).then(()=>{Y.emit("viewUser",l)})}function H(){_.value=!1,f()}return(o,l)=>{const u=s("el-input"),i=s("el-form-item"),x=s("el-col"),z=s("el-date-picker"),M=s("el-button"),K=s("el-row"),L=s("el-form"),B=s("el-card"),Q=s("Plus"),W=s("el-icon"),ee=s("el-segmented"),p=s("el-table-column"),T=s("el-link"),te=s("el-table"),le=s("el-pagination"),ae=s("el-dialog");return O(),fe("div",null,[e(B,null,{default:a(()=>[e(L,{ref_key:"formRef",ref:U,model:n(c),inline:!0,"label-width":"auto"},{default:a(()=>[e(K,{gutter:20},{default:a(()=>[e(x,{span:6},{default:a(()=>[e(i,{label:"活动名称",prop:"name"},{default:a(()=>[e(u,{modelValue:n(c).name,"onUpdate:modelValue":l[0]||(l[0]=t=>n(c).name=t),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1})]),_:1}),e(x,{span:6},{default:a(()=>[e(i,{label:"开始时间",prop:"beginDate"},{default:a(()=>[e(z,{placeholder:"开始时间",modelValue:n(c).beginDate,"onUpdate:modelValue":l[1]||(l[1]=t=>n(c).beginDate=t),type:"date","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(x,{span:6},{default:a(()=>[e(i,{label:"结束时间",prop:"endDate"},{default:a(()=>[e(z,{placeholder:"结束时间",modelValue:n(c).endDate,"onUpdate:modelValue":l[2]||(l[2]=t=>n(c).endDate=t),type:"date","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(x,{span:6,style:{"margin-left":"auto","margin-bottom":"0px"}},{default:a(()=>[e(i,{label:""},{default:a(()=>[m("div",we,[xe,e(M,{onClick:l[3]||(l[3]=t=>A(n(U)))},{default:a(()=>[d("重置")]),_:1}),e(M,{type:"primary",onClick:f},{default:a(()=>[d("查询")]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(B,{style:{"margin-top":"20px"}},{default:a(()=>[m("div",he,[m("div",null,[e(M,{type:"primary",onClick:X},{default:a(()=>[e(W,null,{default:a(()=>[e(Q)]),_:1}),ke]),_:1})]),Ce,m("div",null,[e(ee,{modelValue:n(b),"onUpdate:modelValue":l[4]||(l[4]=t=>h(b)?b.value=t:null),options:I,style:{"margin-left":"20px"}},{default:a(({item:t})=>[m("div",null,g(t.label),1)]),_:1},8,["modelValue"])])]),e(te,{border:"",stripe:"",style:{width:"100%"},ref_key:"tableRef",ref:$,data:n(N),onSortChange:J},{default:a(()=>[e(p,{fixed:"",type:"expand"},{default:a(t=>[e(ie,{data:t.row,style:{margin:"8px 20px"}},null,8,["data"])]),_:1}),e(p,{fixed:"",prop:"name",label:"活动名称",width:"180"}),e(p,{prop:"region",label:"活动区域"},{default:a(t=>[d(g(E(t.row.region)),1)]),_:1}),e(p,{prop:"beginDate",label:"开始时间",sortable:"custom"},{default:a(t=>[d(g(n(j)(t.row.beginDate,"YYYY-MM-DD")),1)]),_:1}),e(p,{prop:"endDate",label:"结束时间"},{default:a(t=>[d(g(n(j)(t.row.endDate,"YYYY-MM-DD")),1)]),_:1}),e(p,{prop:"jit",label:"即时配送"},{default:a(t=>[d(g(F(t.row.jit)),1)]),_:1}),e(p,{prop:"resource",label:"特殊资源"},{default:a(t=>[d(g(q(t.row.resource)),1)]),_:1}),e(p,{prop:"desc",label:"活动形式"},{default:a(t=>[e(ue,{content:t.row.desc},null,8,["content"])]),_:1}),e(p,{fixed:"right",label:"操作",width:"100"},{default:a(t=>[e(T,{underline:!1,type:"primary",onClick:oe=>G(t.row)},{default:a(()=>[d("查看")]),_:2},1032,["onClick"]),e(T,{underline:!1,type:"primary",onClick:oe=>Z(t.row),style:{"margin-left":"10px"}},{default:a(()=>[d("编辑")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),m("div",Ve,[e(le,{layout:"total, prev, pager, next, sizes","current-page":n(D),"onUpdate:currentPage":l[5]||(l[5]=t=>h(D)?D.value=t:null),"page-size":n(y),"onUpdate:pageSize":l[6]||(l[6]=t=>h(y)?y.value=t:null),"page-sizes":[10,20,50,100],total:n(R),onSizeChange:f,onCurrentChange:f},null,8,["current-page","page-size","total"])])]),_:1}),e(ae,{modelValue:n(_),"onUpdate:modelValue":l[7]||(l[7]=t=>h(_)?_.value=t:null),title:n(C),"close-on-click-modal":!1,width:"50%"},{default:a(()=>[(O(),_e(ge(n(V)?re:se),{"is-dialog":!0,onClose:H},null,32))]),_:1},8,["modelValue","title"])])}}}),Ie=De(Me,[["__scopeId","data-v-6b76511f"]]);export{Ie as default};
