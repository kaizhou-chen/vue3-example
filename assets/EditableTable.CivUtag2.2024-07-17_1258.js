import{d as A,aC as O,aD as M,e as E,Z as D,f as N,ah as r,o as _,M as z,O as t,U as e,u as f,P as ee,c as y,F as T,a7 as te,k as le,j as B,Q as oe,T as C,n as ae,ay as P,az as Y,a as $,S as J,D as ne}from"./@vue.DR0bNimP.2024-07-17_1258.js";import{_ as R}from"./plugin-vueexport-helper.DlAUqK2U.2024-07-17_1258.js";import{C as de}from"./element-plus.CSfJK5WV.2024-07-17_1258.js";import{S as re}from"./sortablejs.D5Oeo24j.2024-07-17_1258.js";import"./lodash-es.DvWjmQkM.2024-07-17_1258.js";import"./@vueuse.AtDz_kXm.2024-07-17_1258.js";import"./@element-plus.CMqxRFBv.2024-07-17_1258.js";import"./@popperjs.D9SI2xQl.2024-07-17_1258.js";import"./@ctrl.r5W6hzzQ.2024-07-17_1258.js";import"./dayjs.DJMltt-O.2024-07-17_1258.js";import"./call-bind.D4Qxyof_.2024-07-17_1258.js";import"./get-intrinsic.CjFK80KK.2024-07-17_1258.js";import"./es-errors.DzOT6E3C.2024-07-17_1258.js";import"./has-symbols.eVqrYdw7.2024-07-17_1258.js";import"./has-proto.JnoBQRdH.2024-07-17_1258.js";import"./function-bind.BbkWVFrm.2024-07-17_1258.js";import"./hasown.CQ6MvG1E.2024-07-17_1258.js";import"./set-function-length.9j_ZXv4y.2024-07-17_1258.js";import"./define-data-property.CsoVXVIa.2024-07-17_1258.js";import"./es-define-property.L9kauNg3.2024-07-17_1258.js";import"./gopd.BhGRosE1.2024-07-17_1258.js";import"./has-property-descriptors.CjB1m-qY.2024-07-17_1258.js";import"./async-validator.DKvM95Vc.2024-07-17_1258.js";import"./memoize-one.BdPwpGay.2024-07-17_1258.js";import"./normalize-wheel-es.B6fDCfyv.2024-07-17_1258.js";import"./@floating-ui.DgZhbb76.2024-07-17_1258.js";const se=A({__name:"InputEditor",props:{modelValue:{},modelModifiers:{}},emits:O(["onAfterEdit"],["update:modelValue"]),setup(V,{emit:u}){const b=u,m=M(V,"modelValue"),w=E(),s=D({name:m.value}),g=D({name:[{required:!0,message:"必填",trigger:"blur"}]});N(()=>s.name,d=>{m.value=d});function c(){w.value.validate(d=>{b("onAfterEdit",d)})}return(d,o)=>{const l=r("el-input"),p=r("el-form-item"),h=r("el-form");return _(),z(h,{ref_key:"formRef",ref:w,model:f(s),rules:f(g)},{default:t(()=>[e(p,{prop:"name"},{default:t(()=>[e(l,{modelValue:f(s).name,"onUpdate:modelValue":o[0]||(o[0]=a=>f(s).name=a),onBlur:c,size:"small"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])}}}),ie=R(se,[["__scopeId","data-v-5b707472"]]),ue=A({__name:"NumberEditor",props:{modelValue:{},modelModifiers:{}},emits:O(["onAfterEdit"],["update:modelValue"]),setup(V,{emit:u}){const b=u,m=M(V,"modelValue"),w=E(),s=D({name:m.value}),g=D({name:[{required:!0,message:"必填",trigger:"blur"}]});N(()=>s.name,d=>{m.value=d});function c(d){w.value.validate(o=>{b("onAfterEdit",o)})}return(d,o)=>{const l=r("el-input-number"),p=r("el-form-item"),h=r("el-form");return _(),z(h,{ref_key:"formRef",ref:w,model:f(s),rules:f(g)},{default:t(()=>[e(p,{prop:"name"},{default:t(()=>[ee(e(l,{modelValue:f(s).name,"onUpdate:modelValue":o[0]||(o[0]=a=>f(s).name=a),size:"small"},null,8,["modelValue"]),[[f(de),c]])]),_:1})]),_:1},8,["model","rules"])}}}),me=R(ue,[["__scopeId","data-v-03842681"]]),_e=A({__name:"DateEditor",props:{modelValue:{},modelModifiers:{}},emits:O(["onAfterEdit"],["update:modelValue"]),setup(V,{emit:u}){const b=u,m=M(V,"modelValue"),w=E(),s=D({name:m.value}),g=D({name:[{required:!0,message:"必填",trigger:"blur"}]});N(()=>s.name,d=>{m.value=d});function c(){w.value.validate(d=>{b("onAfterEdit",d)})}return(d,o)=>{const l=r("el-date-picker"),p=r("el-form-item"),h=r("el-form");return _(),z(h,{ref_key:"formRef",ref:w,model:f(s),rules:f(g)},{default:t(()=>[e(p,{prop:"name"},{default:t(()=>[e(l,{modelValue:f(s).name,"onUpdate:modelValue":o[0]||(o[0]=a=>f(s).name=a),type:"date","value-format":"YYYY-MM-DD",onBlur:c,size:"small"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])}}}),pe=R(_e,[["__scopeId","data-v-55aab236"]]),ce=A({__name:"SelectEditor",props:O({options:{}},{modelValue:{},modelModifiers:{}}),emits:O(["onAfterEdit"],["update:modelValue"]),setup(V,{emit:u}){const b=u,m=M(V,"modelValue"),w=E(),s=D({name:m.value}),g=D({name:[{required:!0,message:"必填",trigger:"blur"}]});N(()=>s.name,d=>{m.value=d});function c(d){d||w.value.validate(o=>{b("onAfterEdit",o)})}return(d,o)=>{const l=r("el-option"),p=r("el-select"),h=r("el-form-item"),a=r("el-form");return _(),z(a,{ref_key:"formRef",ref:w,model:f(s),rules:f(g)},{default:t(()=>[e(h,{prop:"name"},{default:t(()=>[e(p,{modelValue:f(s).name,"onUpdate:modelValue":o[0]||(o[0]=i=>f(s).name=i),filterable:!0,onVisibleChange:c,size:"small"},{default:t(()=>[(_(!0),y(T,null,te(d.options,i=>(_(),z(l,{key:i.value,label:i.label,value:i.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])}}}),fe=R(ce,[["__scopeId","data-v-79726913"]]),S=A({__name:"CellEditor",props:O({type:{},scope:{},options:{}},{modelValue:{},modelModifiers:{}}),emits:O(["onAfterEdit"],["update:modelValue"]),setup(V,{emit:u}){const b=M(V,"modelValue"),m=V,w=u,s=E(),g=E(),c=le(()=>({text:ie,number:me,date:pe,select:fe})[m.type]||null);B(()=>{s.value=b.value,g.value=b.value}),N(b,o=>{g.value=o});function d(o){const l={};l.valid=o,l.rowIndex=m.scope.$index,l.field=m.scope.column.property,l.changed=s.value!=g.value,w("onAfterEdit",l)}return(o,l)=>(_(),z(oe(f(c)),{modelValue:b.value,"onUpdate:modelValue":l[0]||(l[0]=p=>b.value=p),options:o.options,onOnAfterEdit:l[1]||(l[1]=p=>d(p))},null,40,["modelValue","options"]))}}),L=V=>(P("data-v-6583b060"),V=V(),Y(),V),be={key:0},ve={key:1},ge=L(()=>$("span",{style:{"margin-right":"10px"}},"姓名",-1)),Ve={key:0},we={key:1},ye={key:0},ke={key:1},he={key:0},Ee={key:1},xe=L(()=>$("p",null,"点击单元格，编辑数据",-1)),$e=A({__name:"CellEditTable",setup(V){const u=E([]),b=[{value:"bj",label:"北京"},{value:"sh",label:"上海"},{value:"gz",label:"广州"},{value:"sz",label:"深圳"}];B(()=>{const g=[{date:"2024-05-03",name:"张三",age:33,area:"bj",address:"上海市普陀区金沙江路 1518 弄"},{date:"2024-05-04",name:"李四",age:34,area:"sh",address:"上海市普陀区金沙江路 1517 弄"},{date:"2024-05-05",name:"王五",age:35,area:"gz",address:"上海市普陀区金沙江路 1519 弄"},{date:"2024-05-06",name:"赵六",age:36,area:"sz",address:"上海市普陀区金沙江路 1516 弄"}];u.value=g});function m(g){return b.find(d=>d.value==g.row.area).label}function w(g,c,d,o){const{property:l}=c;g.editing=l,ae(()=>{d.querySelector(".el-input input").focus()})}function s({field:g,rowIndex:c,changed:d,valid:o}){if(!o)console.log("校验未通过");else{const l=u.value[c];delete l.editing,console.log("changed",d?"值发生了变化":"值没有变化")}}return(g,c)=>{const d=r("el-table-column"),o=r("EditPen"),l=r("el-icon"),p=r("el-table"),h=r("el-alert");return _(),y(T,null,[e(p,{data:f(u),style:{width:"100%"},onCellClick:w},{default:t(()=>[e(d,{prop:"date",label:"日期",width:"180"},{default:t(a=>[a.row.editing==="date"?(_(),y("div",be,[e(S,{type:"date",modelValue:a.row.date,"onUpdate:modelValue":i=>a.row.date=i,scope:a,onOnAfterEdit:c[0]||(c[0]=i=>s(i))},null,8,["modelValue","onUpdate:modelValue","scope"])])):(_(),y("span",ve,C(a.row.date),1))]),_:1}),e(d,{prop:"name",label:"姓名",width:"180"},{header:t(()=>[ge,e(l,null,{default:t(()=>[e(o)]),_:1})]),default:t(a=>[a.row.editing==="name"?(_(),y("div",Ve,[e(S,{type:"text",modelValue:a.row.name,"onUpdate:modelValue":i=>a.row.name=i,scope:a,onOnAfterEdit:c[1]||(c[1]=i=>s(i))},null,8,["modelValue","onUpdate:modelValue","scope"])])):(_(),y("span",we,C(a.row.name),1))]),_:1}),e(d,{prop:"age",label:"年龄"},{default:t(a=>[a.row.editing==="age"?(_(),y("div",ye,[e(S,{type:"number",modelValue:a.row.age,"onUpdate:modelValue":i=>a.row.age=i,scope:a,onOnAfterEdit:c[2]||(c[2]=i=>s(i))},null,8,["modelValue","onUpdate:modelValue","scope"])])):(_(),y("span",ke,C(a.row.age),1))]),_:1}),e(d,{prop:"area",label:"地区"},{default:t(a=>[a.row.editing==="area"?(_(),y("div",he,[e(S,{type:"select",modelValue:a.row.area,"onUpdate:modelValue":i=>a.row.area=i,scope:a,options:b,onOnAfterEdit:c[3]||(c[3]=i=>s(i))},null,8,["modelValue","onUpdate:modelValue","scope"])])):(_(),y("span",Ee,C(m(a)),1))]),_:1}),e(d,{prop:"address",label:"地址"})]),_:1},8,["data"]),e(h,{type:"info","show-icon":"",closable:!1,style:{"margin-top":"20px"}},{default:t(()=>[xe]),_:1})],64)}}}),Ue=R($e,[["__scopeId","data-v-6583b060"]]),Ce={key:0},Ae={key:1},Se={key:0},De={key:1},Oe={key:0},ze={key:1},Ie={key:0},Re={key:1},Me={key:0},Ne=$("span",null,"取消",-1),Te=$("span",null,"确定",-1),Be={key:1},qe=$("span",null,"编辑",-1),je=$("p",null,"点击编辑按钮，编辑数据",-1),Je=A({__name:"RowEditTable",setup(V){const u=E([]),b=E(null),m=[{value:"bj",label:"北京"},{value:"sh",label:"上海"},{value:"gz",label:"广州"},{value:"sz",label:"深圳"}];B(()=>{const o=[{date:"2024-05-03",name:"张三",age:33,area:"bj",address:"上海市普陀区金沙江路 1518 弄"},{date:"2024-05-04",name:"李四",age:34,area:"sh",address:"上海市普陀区金沙江路 1517 弄"},{date:"2024-05-05",name:"王五",age:35,area:"gz",address:"上海市普陀区金沙江路 1519 弄"},{date:"2024-05-06",name:"赵六",age:36,area:"sz",address:"上海市普陀区金沙江路 1516 弄"}];o.forEach((l,p)=>{l.isShow=!0}),u.value=o});function w(o){return m.find(p=>p.value==o.row.area).label}function s(o,l){b.value=JSON.parse(JSON.stringify(o)),o.editing=l}function g(o,l,p){}function c(o){const l=u.value;l[o]=b.value}function d(o){u.value.forEach((l,p)=>{o===p&&delete l.editing})}return(o,l)=>{const p=r("el-table-column"),h=r("el-button"),a=r("el-table"),i=r("el-alert");return _(),y(T,null,[e(a,{data:f(u),style:{width:"100%"}},{default:t(()=>[e(p,{prop:"date",label:"日期",width:"180"},{default:t(n=>[n.row.editing===n.$index?(_(),y("div",Ce,[e(S,{type:"date",modelValue:n.row.date,"onUpdate:modelValue":v=>n.row.date=v,scope:n,onOnAfterEdit:l[0]||(l[0]=v=>void 0)},null,8,["modelValue","onUpdate:modelValue","scope"])])):(_(),y("span",Ae,C(n.row.date),1))]),_:1}),e(p,{prop:"name",label:"姓名",width:"180"},{default:t(n=>[n.row.editing===n.$index?(_(),y("div",Se,[e(S,{type:"text",modelValue:n.row.name,"onUpdate:modelValue":v=>n.row.name=v,scope:n,onOnAfterEdit:l[1]||(l[1]=v=>void 0)},null,8,["modelValue","onUpdate:modelValue","scope"])])):(_(),y("span",De,C(n.row.name),1))]),_:1}),e(p,{prop:"age",label:"年龄"},{default:t(n=>[n.row.editing===n.$index?(_(),y("div",Oe,[e(S,{type:"number",modelValue:n.row.age,"onUpdate:modelValue":v=>n.row.age=v,scope:n,onOnAfterEdit:l[2]||(l[2]=v=>void 0)},null,8,["modelValue","onUpdate:modelValue","scope"])])):(_(),y("span",ze,C(n.row.age),1))]),_:1}),e(p,{prop:"area",label:"地区"},{default:t(n=>[n.row.editing===n.$index?(_(),y("div",Ie,[e(S,{type:"select",modelValue:n.row.area,"onUpdate:modelValue":v=>n.row.area=v,scope:n,options:m,onOnAfterEdit:l[3]||(l[3]=v=>void 0)},null,8,["modelValue","onUpdate:modelValue","scope"])])):(_(),y("span",Re,C(w(n)),1))]),_:1}),e(p,{prop:"address",label:"地址"}),e(p,{label:"操作",width:"200"},{default:t(n=>[n.row.editing===n.$index?(_(),y("span",Me,[e(h,{size:"small",plain:"",onClick:v=>c(n.$index)},{default:t(()=>[Ne]),_:2},1032,["onClick"]),e(h,{size:"small",type:"primary",plain:"",onClick:v=>d(n.$index)},{default:t(()=>[Te]),_:2},1032,["onClick"])])):(_(),y("span",Be,[e(h,{size:"small",type:"primary",plain:"",onClick:v=>s(n.row,n.$index)},{default:t(()=>[qe]),_:2},1032,["onClick"])]))]),_:1})]),_:1},8,["data"]),e(i,{type:"info","show-icon":"",closable:!1,style:{"margin-top":"20px"}},{default:t(()=>[je]),_:1})],64)}}}),F=V=>(P("data-v-3c263d58"),V=V(),Y(),V),Pe={class:"dynamic-table"},Ye=F(()=>$("span",{style:{"margin-left":"6px"}},"删除",-1)),Le=F(()=>$("span",null,"新增",-1)),Fe={class:"preview",style:{"white-space":"pre"}},Qe=A({__name:"DynamicTable",setup(V){const u=E([]),b=E(),m=E(!1),w=E(),s=E(),g=E();B(()=>{u.value=d,c()});function c(){const a=document.querySelector(".dynamic-table .el-table__body-wrapper tbody");re.create(a,{draggable:".dynamic-table .el-table__row",handle:".ux-drag",chosenClass:"ux-chosen",onEnd(i){const{newIndex:n,oldIndex:v}=i,U=JSON.parse(JSON.stringify(u.value)),I=U.splice(v,1)[0];U.splice(n,0,I),u.value=U}})}const d=[{id:1,date:"2023-05-02",name:"王小虎",age:30,address:"上海市普陀区金沙江路 1516 弄"},{id:2,date:"2023-05-03",name:"王小虎",age:31,address:"上海市普陀区金沙江路 1517 弄"},{id:3,date:"2023-05-04",name:"王小虎",age:32,address:"上海市普陀区金沙江路 1518 弄"},{id:4,date:"2023-05-05",name:"王小虎",age:33,address:"上海市普陀区金沙江路 1519 弄"}];function o(){u.value.push({id:new Date().getTime(),date:"",name:"",age:null,address:""})}function l(a){const i=[...u.value];i.splice(a,1),u.value=i}function p(){m.value=!0}function h(){b.value=JSON.stringify(u.value,null,2),console.log("result",u.value)}return(a,i)=>{const n=r("Rank"),v=r("el-icon"),U=r("el-table-column"),I=r("el-input"),Q=r("Delete"),Z=r("el-link"),G=r("el-table"),H=r("Plus"),q=r("el-button"),K=r("el-divider"),W=r("el-alert"),j=r("el-tour-step"),X=r("el-tour");return _(),y(T,null,[$("div",Pe,[e(G,{"row-key":"id",data:f(u),style:{width:"100%"}},{default:t(()=>[e(U,{width:"40"},{default:t(()=>[$("div",{ref_key:"ref2",ref:s,class:"ux-drag",style:{cursor:"move"}},[e(v,null,{default:t(()=>[e(n)]),_:1})],512)]),_:1}),e(U,{prop:"date",label:"日期",width:"180"},{default:t(k=>[e(I,{modelValue:k.row.date,"onUpdate:modelValue":x=>k.row.date=x},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(U,{prop:"name",label:"姓名",width:"180"},{default:t(k=>[e(I,{modelValue:k.row.name,"onUpdate:modelValue":x=>k.row.name=x},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(U,{prop:"age",label:"年龄",width:"180"},{default:t(k=>[e(I,{modelValue:k.row.age,"onUpdate:modelValue":x=>k.row.age=x},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(U,{prop:"address",label:"地址"},{default:t(k=>[e(I,{modelValue:k.row.address,"onUpdate:modelValue":x=>k.row.address=x},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(U,{width:"75"},{default:t(k=>[e(Z,{ref_key:"ref3",ref:g,underline:!1,onClick:x=>l(k.$index)},{default:t(()=>[e(v,null,{default:t(()=>[e(Q)]),_:1}),Ye]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(q,{ref_key:"ref1",ref:w,onClick:o,style:{width:"100%","border-style":"dashed","margin-top":"20px"}},{default:t(()=>[e(v,null,{default:t(()=>[e(H)]),_:1}),Le]),_:1},512)]),e(W,{type:"info","show-icon":"",closable:!1,style:{"margin-top":"20px"}},{default:t(()=>[e(q,{type:"primary",text:"",onClick:p},{default:t(()=>[J("功能介绍")]),_:1}),e(K,{direction:"vertical"}),e(q,{type:"primary",text:"",onClick:h},{default:t(()=>[J("查看数据")]),_:1})]),_:1}),$("div",Fe,C(f(b)&&`content: ${f(b)}`),1),e(X,{modelValue:f(m),"onUpdate:modelValue":i[0]||(i[0]=k=>ne(m)?m.value=k:null)},{default:t(()=>{var k,x;return[e(j,{target:(k=f(w))==null?void 0:k.$el,title:"新增按钮",description:"点击新增按钮，增加一条数据"},null,8,["target"]),e(j,{target:f(s),title:"拖动排序",description:"拖动排序图标，进行排序"},null,8,["target"]),e(j,{target:(x=f(g))==null?void 0:x.$el,title:"删除按钮",description:"点击删除按钮，删除这条数据"},null,8,["target"])]}),_:1},8,["modelValue"])],64)}}}),Ze=R(Qe,[["__scopeId","data-v-3c263d58"]]),yt=A({__name:"EditableTable",setup(V){return(u,b)=>{const m=r("el-tab-pane"),w=r("el-tabs");return _(),z(w,null,{default:t(()=>[e(m,{label:"可编辑单元格"},{default:t(()=>[e(Ue)]),_:1}),e(m,{label:"可编辑行"},{default:t(()=>[e(Je)]),_:1}),e(m,{label:"动态表格 + 拖拽排序"},{default:t(()=>[e(Ze)]),_:1})]),_:1})}}});export{yt as default};
