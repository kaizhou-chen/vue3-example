import{d as J,b as d,ai as n,o as C,c as O,a as i,U as e,u as _,D as N,a2 as T,O as r,I as B,S as g,T as j}from"./@vue.BRKSBXdb.2024-08-23_0855.js";import{l as V}from"./json5.8HslT92O.2024-08-23_0855.js";import{a as U}from"./element-plus.DJt1SzqQ.2024-08-23_0855.js";import{_ as I}from"./plugin-vueexport-helper.DlAUqK2U.2024-08-23_0855.js";import"./lodash-es.DvWjmQkM.2024-08-23_0855.js";import"./@vueuse.CSofjJuH.2024-08-23_0855.js";import"./@element-plus.CXiHu7Kc.2024-08-23_0855.js";import"./@popperjs.D9SI2xQl.2024-08-23_0855.js";import"./@ctrl.r5W6hzzQ.2024-08-23_0855.js";import"./dayjs.CPVlA08G.2024-08-23_0855.js";import"./call-bind.DAUNaQ65.2024-08-23_0855.js";import"./get-intrinsic.DB0lrOCt.2024-08-23_0855.js";import"./es-errors.DzOT6E3C.2024-08-23_0855.js";import"./has-symbols.eVqrYdw7.2024-08-23_0855.js";import"./has-proto.JnoBQRdH.2024-08-23_0855.js";import"./function-bind.BbkWVFrm.2024-08-23_0855.js";import"./hasown.D9QVQHSI.2024-08-23_0855.js";import"./set-function-length.D_FcvHgY.2024-08-23_0855.js";import"./define-data-property.DjNWBd2S.2024-08-23_0855.js";import"./es-define-property.CFiic7Xl.2024-08-23_0855.js";import"./gopd.BJopahKq.2024-08-23_0855.js";import"./has-property-descriptors.PcPi-1-h.2024-08-23_0855.js";import"./async-validator.DKvM95Vc.2024-08-23_0855.js";import"./memoize-one.BdPwpGay.2024-08-23_0855.js";import"./normalize-wheel-es.B6fDCfyv.2024-08-23_0855.js";import"./@floating-ui.DF51-gJp.2024-08-23_0855.js";const L={class:"json-tool",style:{position:"relative"}},R={style:{display:"flex"}},z={style:{flex:"1","margin-right":"50px"}},E={style:{flex:"1"}},F={style:{display:"flex","align-items":"center"}},M={class:"code"},P=J({__name:"JsonFormat",setup(H){let t=d(""),c=d("");const f=d(!1),h=d([]),b=d("");function y(){try{const o=V.parse(t.value);c.value=JSON.stringify(o,null,"  ")}catch{}}function k(o){const s=o.clipboardData.getData("Text");if(s.length<1e4){t.value=s,y();return}t.value="",y();let p="";try{const m=V.parse(s);p=JSON.stringify(m,null,"  "),b.value=p,h.value=p.split(`
`).map((u,x)=>({id:x,code:u})),f.value=!0,S()}catch(m){v("JSON 格式化失败",m)}}function v(o,a){U.info({message:o+"<br>"+a,dangerouslyUseHTMLString:!0})}function w(){f.value=!1}function S(){navigator.clipboard.writeText(b.value).then(()=>{v("复制成功","JSON 已复制到剪贴板。")},()=>{v("复制失败","拒绝复制")})}return(o,a)=>{const s=n("el-input"),p=n("el-button"),m=n("el-page-header"),u=n("el-text"),x=n("el-alert"),D=n("RecycleScroller");return C(),O("div",L,[i("div",R,[i("div",z,[e(s,{modelValue:_(t),"onUpdate:modelValue":a[0]||(a[0]=l=>N(t)?t.value=l:t=l),type:"textarea",spellcheck:"false",placeholder:"请输入需要格式化的json",onInput:y,onPaste:T(k,["prevent"])},null,8,["modelValue"])]),i("div",E,[e(s,{modelValue:_(c),"onUpdate:modelValue":a[1]||(a[1]=l=>N(c)?c.value=l:c=l),type:"textarea",spellcheck:"false",class:"result"},null,8,["modelValue"])])]),i("div",{class:B(["view-large-data",{active:_(f)}])},[i("div",F,[e(m,{onBack:w,style:{"white-space":"nowrap"}},{content:r(()=>[e(p,{onClick:S,type:"primary"},{default:r(()=>[g("复制")]),_:1})]),_:1}),e(x,{type:"success",closable:!1},{default:r(()=>[e(u,null,{default:r(()=>[g("格式化的 JSON 内容，已复制到剪贴板。可以粘贴到文本编辑器里查看。")]),_:1}),e(u,{type:"danger",style:{"margin-left":"12px"}},{default:r(()=>[g("由于使用了虚拟滚动，所以不支持搜索。")]),_:1})]),_:1})]),e(D,{class:"scroller",items:_(h),"item-size":32,"key-field":"id"},{default:r(({item:l})=>[i("div",M,j(l.code),1)]),_:1},8,["items"])],2)])}}}),ye=I(P,[["__scopeId","data-v-b3cbbb2e"]]);export{ye as default};
